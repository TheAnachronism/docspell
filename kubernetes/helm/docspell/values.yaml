# Default values for docspell.
# This is a YAML-formatted file.
# Declare variables to be passed to your templates.

## @section Global
#
## @param global.imageRegistry global image registry override
## @param global.imagePullSecrets global image pull secrets override; can be extended by `imagePullSecrets`
## @param global.storageClass global storage class override
## @param global.hostAliases global hostAliases which will be added to the pod's hosts files
global:
  imageRegistry: ""
  ## E.g.
  ## imagePullSecrets:
  ##    - myRegistryKeySecretName
  ##
  imagePullSecrets: []
  storageClass: ""
  hostAliases: []
  # - ip: 192.168.137.2
  #   hostnames:
  #   - example.com

## @section Docspell

docspell:
  ## @param docspell.fullTextSearch.enabled The full-text search feature can be disabled and can be re-enabled at any time
  ## @param docspell.fullTextSearch.backend Which backend to use, either solr or postgresql
  ## @param docspell.fullTextSearch.solr.commitWithin Used to tell solr when to commit the data
  ## @param docspell.fullTextSearch.solr.logVerbose If true, logs request and response bodies
  ## @param docspell.fullTextSearch.solr.defType The defType parameter to lucene that defines the parses to use. (https://solr.apache.org/guide/8_4/query-syntax-and-parsing.html#query-syntax-and-parsing)
  ## @param docspell.fullTextSearch.solr.qOp The default combiner for tokens (AND / OR)
  fullTextSearch:
    enabled: true
    solr:
      commitWithin: 1000
      logVerbose: false
      defType: lucene
      qOp: OR  
  ## @param docspell.server.appName Name of the application shown in the top right corner of the web application
  ## @param docspell.server.appId Id of the node
  ## @param docspell.server.maxItemPageSize Hard limit of batch returned items for search
  ## @param docspell.server.maxNoteLength Number of characters to return for each item notes when searching
  ## @param docspell.server.showClassificationSettings Whether the classification form in the collective settings is displayed or not
  server:
    appName: Docspell
    appId:
    maxItemPageSize: 200
    maxNoteLength: 180
    showClassificationSettings: true
    
    ## @param docspell.server.logging.format Format of log messages. Can be json,. Logfmt, Fancy or Plain
    ## @param docspell.server.logging.minimumLevel Minimum level of the log. From lowest to highest: Trace, Debug, Info, Warn, Error
    logging:
      format: "fancy"
      minimumLevel: "Warn"

    ## @param docspell.server.bind.address The address the server binds to. Should be set to `0.0.0.0` as otherwise it'll reject connections from the ingress
    ## @param docspell.server.bind.port The port the server binds to. Make sure to use the same as in the port for the service and ingress
    bind:
      address: 0.0.0.0
      port: 7880
    ## @param docspell.server.auth.serverSecret Secret to sign the authenticator tokens. If empty, one will be generated
    ## @param docspell.server.auth.sessionValid How long an authentication token is valid
    ## @param docspell.server.auth.onAccountSourceConflict Fail if a duplicate account from an external source should fail the login. Can be: fail, convert    
    ## @param docspell.server.auth.rememberMe.enabled Enable/disable the remember me function
    ## @param docspell.server.auth.rememberMe.valid How long the remember me cookie/token is valid
    auth:
      serverSecret: b64:YRx77QujCGkHSvll0TVEmtTaw3Z5eXr+nWMsEJowgKg=
      sessionValid: "5 minutes"
      onAccountSourceConflict: fail
      rememberMe:
        enabled: true
        valid: "30 days"
    ## @param docspell.server.downloadAll.maxFiles How many files to allow in "download as zip"
    ## @param docspell.server.downloadAll.maxSize The maximum (uncompressed) size of the zip file contents.
    donwloadAll:
      maxFiles: 500
      maxSize: 1400M
    ## @param docspell.server.openid OpenID Connect (oidc) or OAuth2 authentication providers. Only the "Authorization Code Flow" is supported
    openid:
      - display: Keycloak
        enabled: false
        provider:
          providerId: keycloak
          clientId: docspell
          clientSecret: example-secret-439e-bf06-911e4cdd56a6
          scope: profile
          authorizeUrl: http://localhost:8080/auth/realms/home/protocol/openid-connect/auth
          tokenUrl: http://localhost:8080/auth/realms/home/protocol/openid-connect/token
          # User URL is not used when signature key is set
          # userUrl: http://localhost:8080/auth/realms/home/protocol/openid-connect/userinfo
          logoutUrl: http://localhost:8080/auth/realms/home/protocol/openid-connect/logout
          signKey: b64:anVzdC1hLXRlc3Q=
          sigAlgo: RS512
        # The collective of the user is given in the access token as property `docspell_collective`
        collectiveKey: "lookup:docspell_collective"
        # The username to use for the docspell account
        userKey: preferred_username
    ## @param docspell.server.oidcAutoRedirect When exactly one OIDC/OAuth provider is configured, then the webapp automatically redirects to its authentication page skipping the docspell login page
    oidcAutoRedirect: true
    ## @param docspell.server.integrationEndpoint.enabled Enable endpoint to upload files to any collective
    ## @param docspell.server.integrationEndpoint.priorty Priority to use when submitting files through this endpoint
    ## @param docspell.server.integrationEndpoint.sourceName The name used for the item "source" property when uploaded through this endpoint
    ## @param docspell.server.integrationEndpoint.allowedIps.enabled Enable ip-allow-access-list
    ## @param docspell.server.integrationEndpoint.allowedIps.ips List of ips which should be added to the access list
    ## @param docspell.server.integrationEndpoint.httpBasic.enabled Whether integration endpoint requests are expected to use http basic auth when uploading files
    ## @param doscpell.server.integrationEndpoint.httpHeader.enabled Whether integration endpoint requests are expected to supply some specific header when uploading files
    integrationEndpoint:
      enabled: true
      priority: low
      sourceName: integration
      allowedIps:
        enabed: false
        ips:
          # IP addresses may be specific as simple globs: a part marked as '*' matches any octet, like in `192.168.*.*`
          - 127.0.0.1
      httpBasic:
        enabled: false
        realm: "Docspell Integration"
        user: "docspell-int"
        password: "docspell-int"
      httpHeader:
        enabled: true
        headerName: "Docspell-Integration"
        headerValue: "SomeSecret"
    ## @param docspell.server.adminEndpoint.secret Special administration endpoint. If a secret isn't supplied, the endpont is disabled
    adminEndpoint:
      secret: 
  
    ## @param docspell.server.backend.mailDebug Enable or disabling debugging for e-mail related functionality
    backend:
      mailDebug: false
      ## @param docspell.server.backend.databaseSchema.runMainMigrations Whether to run mian database migrations
      ## @param docspell.server.backend.databaseSchema.runFixupMigrations Whether to run the fixup migrations
      ## @param docspell.server.backend.databaseSchema.repairSchema Use with care. This repairs all migrations in the datbase by updating their checksums and removing failed migrations
      databaseSchema:
        runMainMigrations: true
        runFixupMigrations: true
        repairSchema: false
      ## @param docspell.server.backend.signup.mode The mode defines if new users can signup or not (open, invite, closed)
      ## @param docspell.server.backend.signup.newInvitePassword If mode is 'invite', a password must be provided to generate invitation keys
      ## @param docspell.server.backend.signup.inviteTime If mode is 'invite', this is the period an invitation token is considered valid
      signup:
        mode: open
        newInvitePassword: 
        inviteTime: "3 days"
  ## @param docspell.joex.appId Id of the node
  ## @param docspell.joex.mailDebug Enable or disabling debugging for e-mail related functionality  
  joex:
    appId: 
    mailDebug: false
    ## @param docspell.joex.bind.address The address joex binds to. Should be set to `0.0.0.0`, as otherwise it'll refuse connections
    ## @param docspell.joex.bind.port The port joex binds to. Make sure to set the same port for the service
    bind:
      address: 0.0.0.0
      port: 7878
    ## @param docspell.joex.logging.format Format of log messages. Can be json,. Logfmt, Fancy or Plain
    ## @param docspell.joex.logging.minimumLevel Minimum level of the log. From lowest to highest: Trace, Debug, Info, Warn, Error
    logging:
      format: "fancy"
      minimumLevel: "Warn"
    ## @param docspell.joex.databaseSchema.runMainMigrations Whether to run mian database migrations
    ## @param docspell.joex.databaseSchema.runFixupMigrations Whether to run the fixup migrations
    ## @param docspell.joex.databaseSchema.repairSchema Use with care. This repairs all migrations in the datbase by updating their checksums and removing failed migrations
    databaseSchema:
      runMainMigrations: true
      runFixupMigrations: true
      repairSchema: false
    ## @param doscpell.joex.scheduler.name Each scheduler needs a unique name. This defaults to the node name
    ## @param docspell.joex.scheduler.poolSize Number of processing allowed in parallel
    ## @param docspell.joex.scheduler.countingScheme A counting s cheme determines the ratio of how high- and low-prio jobs are run
    ## @param docspell.joex.scheduler.retries How often a failed job should be retried until it enters faield state
    ## @param docspell.joex.scheduler.retryDelay The delay until the next try is performed for a failed job
    ## @param docspell.joex.scheduler.logBufferSize The queue size of log statements from a job
    ## @param docspell.joex.scheduler.wakeupPeriod If no job is left un the queue, the scheduler will wait until a notify is requested
    scheduler:
      name: 
      poolSize: 1
      countingScheme: "4,1"
      retries: 2
      retryDelay: "1 minute"
      logBufferSize: 500
      wakeupPeriod: "30 minutes"
    ## @param docspell.joex.periodicScheduler.name Each scheduler needs a unique name. This defaults to the node name
    ## @param docspell.joex.periodicScheduler.wakeupPeriod A fallback to start looking for due periodic tasks regularly
    periodicScheduler:
      name:
      wakeupPeriod: "10 minutes"
    ## @param docspell.joex.userTasks.scanMailbox.maxFolders A limit of how many folders to scan through. If a user configures more than this, only upto this limit folders are scanned and a warning is logged
    ## @param docspell.joex.userTasks.scanMailbox.mailChunkSize How many mails (headers only) to retreieve in one chunk
    ## @param docspell.joex.userTasks.scanMailbox.maxMails A limit on how many mails to process in one job run. This is meant to avoid too heavy resource allocation to one user/collective
    userTasks:
      scanMailbox:
        maxFolders: 50
        mailChunkSize: 50
        maxMails: 500
    ## @param docspell.joex.houseKeeping.schedule When the house keeping tasks execute. Default is to run every week
    ## @param docspell.joex.houseKeeping.cleanupInvites.enabled Whether to remove invation keys that have been created but not used
    ## @param docspell.joex.houseKeeping.cleanupInvites.olderThan The minimum age of invites to be deleted
    ## @param docspell.joex.houseKeeping.cleanupRememberMe.enabled Whether to remove expired remember-me tokens
    ## @param docspell.joex.houseKeeping.cleanupRememberMe.olderThan The minimum age of tokens to be deleted
    ## @param docspell.joex.houseKeeping.cleanupJobs.enabled Whether to delete old job log files. Logs are already stored in the database
    ## @param docspell.joex.houseKeeping.cleanupJobs.olderThan The minimum age of jobs to delete
    ## @param docspell.joex.houseKeeping.cleanupJobs.deleteBatch how many jobs are deleted in one transaction
    ## @param docspell.joex.houseKeeping.cleanupDownloads.enabled Whether to delete cached zip files for past downloads
    ## @param docspell.joex.houseKeeping.cleanupDownloads.olderThan The minimum age of a download file to be deleted
    ## @param docspell.joex.houseKeeping.cleanupNodes.enabled Whether to delete node entries that are not reachable anymore
    ## @param docspell.joex.houseKeeping.cleanupNodes.minNotFound How often the node must be unreachable, before it's removed
    ## @param docspell.joex.houseKeeping.integrityCheck.enabled Whether to check all files against their checksum
    houseKeeping:
      schedule: "Sun *-*-* 00:00:00 UTC"
      cleanupInvites:
        enabled: true
        olderThan: "30 days"
      cleanupRememberMe:
        enabled: true
        olderThan: "30 days"
      cleanupJobs:
        enabled: true
        olderThan: "30 days"
        deleteBatch: 100
      cleanupDownloads:
        enabled: true
        olderThan: "14 days"
      cleanupNodes:
        enabled: true
        minNotFound: 2
      integrityCheck:
        enabled: true
    ## @param docspell.joex.updateCheck.enabled Whether to periodically check for new releases of docspell
    ## @param docspell.joex.updateCheck.testRun Sends the mail without checking the latest release
    ## @param docspell.joex.updateCheck.schedule When the update check should execute. Default is to run every week
    ## @param docspell.joex.updateCheck.senderAccount An account id in the form of `collective/user` This user account must have at least one valid SMTP settings which are used to send the mail
    ## @param docspell.joex.updateCheck.smtpId The SMTP conenction id that should be used for sending the mail
    ## @param docspell.joex.updateCheck.recipients A list of recipient e-mail addresses
    ## @param docspell.joex.updateCheck.subject The subject of the mail. If supports the same variables as the body
    ## @param docspell.joex.updateCheck.body The body of the mail. Subject and body can contain these variables which are replaced: latestVersion, currentVersion, releasedAt. The body is processed as markdown after the variables have been replaced
    updateCheck:
      enabled: false
      testRun: false
      schedule: "Sun *-*-* 00:00:00 UTC"
      senderAccount:
      smtpId:
      recipients: []
      # - john.doe@gmail.com
      subject: "Docspell {{ latestVersion }} is available"
      body: |-
        Hello,

        You are currently running Docspell {{ currentVersion }}. Version *{{ latestVersion }}*
        is now available, which was released on {{ releasedAt }}. Check the release page at:

        <https://github.com/eikek/docspell/releases/latest>

        Have a nice day!

        Docpell Update Check
    ## @param docspell.joex.convert.htmlConverter Which HTML->PDF converter command to use. (wkhtmlpdf, weasyprint)
    convert:
      htmlConverter: wkhtmlpdf
    ## @param docspell.joex.fullTextSearch.migration.indexAllChunk Chink size to use when indexing data from the database. This many attachments are loaded into memory and pushed to the full-text index
    fullTextSearch:
      migration:
        indexAllChink: 10

## @section Ingress
#
## @param ingress.enabled Enable ingress
## @param ingress.className Ingress class name
## @param ingress.annotations Ingress annotations
## @param ingress.hosts[0].host Default Ingress host
## @parem ingress.hosts[0].paths[0].path Default Ingress path
## @param ingress.hosts[0].paths[0].pathType Ingress path type
## @param ingress.tls Ingress tls settings
## @extra ingress.apiVersion specify APIVersion of ingress object. Mostly would only be used for argocd
ingress:
  enabled: true
  className:
  annotations:
    # Set a proper upload size, so that large documents can be uploaded as well.
    nginx.ingress.kubernetes.io/proxy-body-size: 10G
    # This is needed for the webcocket connections to work.
    nginx.ingress.kubernetes.io/configuration-snippet: |
      proxy_set_header Upgrade "websocket";
      proxy_set_header Connection "Upgrade";
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: docspell.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []
  # - secretName: chart-exmaple-tls
  #   hosts:
  #     - docspell.example.com
  # Mostly for argocd or any other CI that uses `helm template | kubectl apply` or similar
  # If helm doesn't correctly detect your ingress API version you can set it here.
  # apiVersion: networking.k8s.io/v1

## @section ServiceAccount
#
## @param serviceAccount.create Enable the creation of a ServiceAccount for docspell
## @param serviceAccount.name Name of the created ServieAccount, defauts to release name.
## @param serviceAccount.automountServiceAccountToken Enable/disable auto mounting of the service account token
## @param serviceAccount.imagePullSecrets Image pull secrets, available to the ServiceAccount
## @param serviceAccount.annotations Custom annotations for the ServiceAccount
## @param serviceAccount.labels Custom labels for the ServiceAccount  
serviceAccount:
  create: false
  name: ""
  automountServiceAccountToken: false
  imagePullSecrets: []
  # - name: private-registry-access
  annotations: {}
  labels: {}

## @section Restserver
#
## @param restserver.replicaCount Number of replicas for the restserver deployment
## @param restserver.podAnnotations Annotations for the solr pod
restserver:
  replicaCount: 1
  podAnnotations: {}
  ## @param restserver.image.registry Image registry, e.g. gcr.io,docker.io
  ## @param restserver.image.repository Image to start for this pod
  ## @param restserver.image.tag Visit [Image tag](https://hub.docker.com/r/docspell/restserver/tags?page=1&ordering=last_updated). Defaults to `appVersion` within Chart.yaml.
  ## @param restserver.image.pullPolicy Image pull policy
  image:
    registry: ""
    repository: docspell/restserver
    tag: ""
    pullPolicy: IfNotPresent

  ## @param restserver.service.type Kubernetes service type for solr traffic
  ## @param restserver.service.port Port number for solr traffic
  ## @param restserver.service.annotations Solr service annotations
  ## @param restserver.service.labels Solr service additional labels      
  service:
    type: ClusterIP
    port: 7880
    annotations: {}
    labels: {}

  ## @param restserver.deployment.labels Labels for the restserver deployment
  ## @param restserver.deployment.annotations Annotations for the restserver deployment to be created
  ## @param restserver.deployment.terminationGracePeriodSeconds How long to wait until forcefully kill the restserver pod
  ## @param restserver.deployment.env Additional environment variables to pass to the restserver container
  deployment:
    labels: {}
    annotations: {}
    terminationGracePeriodSeconds: 60
    env: []

  ## @param restserver.strategy.type Strategy type
  ## @param restserver.strategy.rollingUpdate.maxSurge maxSurge
  ## @param restserver.strategy.rollingUpdate.maxUnavailable maxUnavailable
  strategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxSurge: "100%"
      maxUnavailable: 0
  ## @param restserver.resources.limits.cpu CPU limit for the restserver pod
  ## @param restserver.resources.limits.memory Memory limit for the restserver pod
  ## @param restserver.resources.requests.cpu Requested cpu for the restserver pod
  ## @param restserver.resources.requests.memory Requested memory for the restserver pod
  resources:
    limits:
      cpu: 1
      memory: 1Gi
    requests:
      cpu: 0.5
      memory: 512Mi

## @section Joex
#
## @param joex.replicaCount Number of replicas for the joex deployment
## @param joex.podAnnotations Annotations for the solr pod
## @param joex.args Additional arguments that should be passed to the pod
joex:
  replicaCount: 1
  podAnnotations: {}
  additionalArgs:
    - -J-Xmx3G
  ## @param joex.image.registry Image registry, e.g. gcr.io,docker.io
  ## @param joex.image.repository Image to start for this pod
  ## @param joex.image.tag Visit [Image tag](https://hub.docker.com/r/docspell/joex/tags?page=1&ordering=last_updated). Defaults to `appVersion` within Chart.yaml.
  ## @param joex.image.pullPolicy Image pull policy
  image:
    registry: ""
    repository: docspell/joex
    tag: ""
    pullPolicy: IfNotPresent

  ## @param joex.service.type Kubernetes service type for solr traffic
  ## @param joex.service.port Port number for solr traffic
  ## @param joex.service.annotations Solr service annotations
  ## @param joex.service.labels Solr service additional labels      
  service:
    type: ClusterIP
    port: 7878
    annotations: {}
    labels: {}

  ## @param joex.deployment.labels Labels for the restserver deployment
  ## @param joex.deployment.annotations Annotations for the restserver deployment to be created
  ## @param joex.deployment.terminationGracePeriodSeconds How long to wait until forcefully kill the restserver pod
  ## @param joex.deployment.env Additional environment variables to pass to the restserver container
  deployment:
    labels: {}
    annotations: {}
    terminationGracePeriodSeconds: 60
    env: []

  ## @param joex.strategy.type Strategy type
  ## @param joex.strategy.rollingUpdate.maxSurge maxSurge
  ## @param joex.strategy.rollingUpdate.maxUnavailable maxUnavailable
  strategy:
    type: "RollingUpdate"
    rollingUpdate:
      maxSurge: "100%"
      maxUnavailable: 0
  ## @param joex.resources.limits.cpu CPU limit for the joex pod
  ## @param joex.resources.limits.memory Memory limit for the joex pod. Make sure to change the `-J-Xmx` argument to reflect the max-memory setting
  ## @param joex.resources.requests.cpu Requested cpu for the joex pod
  ## @param joex.resources.requests.memory Requested memory for the joex pod
  resources:
    limits:
      cpu: 1
      memory: 3Gi
    requests:
      cpu: 0.5
      memory: 1.5Gi
## @section solr
#
## @param solr.enabled Enable Apache Solr for full-text-search
## @param solr.podAnnotations Annotations for the solr pod
## @param solr.nodeSelector NodeSelector for the solr statefulset
## @param solr.affinity Affinity for the solr statefulset

## @param solr.livenessProbe 

solr:
  enabled: true
  podAnnotations: {}
  nodeSelector: {}
  affinity: {}
  ## @param solr.image.registry Image registry, e.g. gcr.io,docker.io
  ## @param solr.image.repository Image to start for this pod
  ## @param solr.image.tag Visit [Image tag](https://hub.docker.com/_/solr/tags?page=1&ordering=last_updated). Default is `9`.
  ## @param solr.image.pullPolicy Image pull policy
  image:
    registry: ""
    repository: solr
    tag: "9"
    pullPolicy: IfNotPresent
  ## @param solr.service.type Kubernetes service type for solr traffic
  ## @param solr.service.port Port number for solr traffic
  ## @param solr.service.annotations Solr service annotations
  ## @param solr.service.labels Solr service additional labels      
  service:
    type: ClusterIP
    port: 8983
    annotations: {}
    labels: {}
  ## @param solr.livenessProbe.enabled Enable liveness probe
  ## @param solr.livenessProbe.httpGet.port Port for the http get request
  ## @param solr.livenessProbe.httpGet.path URL path for the http get request
  ## @param solr.livenessProbe.initialDelaySeconds Initial delay before liveness probe is initiated
  ## @param solr.livenessProbe.periodSeconds Period for liveness probe
  ## @param solr.livenessProbe.timoutSeconds Timeout for liveness probe
  livenessProbe:
    enabled: true
    httpGet:
      port: 8983
      path: /solr/admin/info/system
    initialDelaySeconds: 60
    periodSeconds: 10
    timeoutSeconds: 5
  ## @param solr.readinessProbe.enabled Enable readiness probe
  ## @param solr.readinessProbe.httpGet.port Port for the http get request
  ## @param solr.readinessProbe.httpGet.path URL path for the http get request
  ## @param solr.readinessProbe.initialDelaySeconds Initial delay before readiness probe is initiated
  ## @param solr.readinessProbe.periodSeconds Period for readiness probe
  ## @param solr.readinessProbe.timoutSeconds Timeout for readiness probe
  readinessProbe:
    enabled: true
    httpGet:
      path: /solr/admin/info/system
      port: 8983
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 1
  
  ## @param solr.resources Kubernetes resouces for solr
  resources:
    {}

  ## @param solr.initContainers.resources.limits Kubernetes limits for solr init containers
  ## @param solr.initContainers.resources.requests.cpu cpu resource limits for solr init containers
  ## @param solr.initContainers.resources.requests.memory memory limits for solr init containers
  initContainers:
    resources:
      limits: {}
      requests:
        cpu: 100m
        memory: 128Mi
  
  ## @param solr.statefulSet.labels Labels for the solr statefulset
  ## @param solr.statefulSet.annotations Annotations for the solr statefulset to be created
  ## @param solr.statefulSet.terminationGracePeriodSeconds How long to wait until forcefully kill the solr pod
  ## @param solr.statefulSet.env Additional environment variables to pass to the solr container
  statefulSet:
    labels: {}
    annotations: {}
    terminationGracePeriodSeconds: 60
    env: []
    # - name: VARIABLE
    #   value: my-value

  ## @param solr.persistence.enabled Enable persistence storage for solr
  ## @param solr.persistence.claimName Use an existing claim to store solr index
  ## @param solr.persistence.size Size for persistence to store solr index
  ## @param solr.persistence.accessModes ACcessMode for persistence
  ## @param solr.persistence.storageClass Name of the storage class to use
  ## @param solr.persistence.volumeName Name of persistent volume in PVC
  ## @param solr.persistence.annotations.helm/sh/resource-policy Resource policy for the persistence volume claim
  persistence:
    enabled: true
    claimName: solr-data
    size: 5Gi
    accessModes: ["ReadWriteOnce"]
    storageClass:
    volumeName: ""
    annotations:
      helm.sh/resource-policy: keep

## @section PostgreSQL
#
## @param postgresql.enabled Enable PostgreSQL
## @param postgresql.global.postgresql.auth.password Password for the `dbname` user (overrides `auth.password`)
## @param postgresql.global.postgresql.auth.database Name for a custom database to create (overrides `auth.database`)
## @param postgresql.global.postgresql.auth.username Name for a custom user to create (overrides `auth.username`)
## @param postgresql.global.postgresql.service.ports.postgresql PostgreSQL service port (overrides `service.ports.postgresql`)
## @param postgresql.primary.persistence.size PVC Storage Request for PostgreSQL volume
postgresql:
  enabled: true
  global:
   postgresql:
    auth:
     database: dbname
     username: dbuser
     password: dbpass
    service:
     postgresql: 5432
  primary:
   persistence:
    size: 10Gi
    annotations:
      helm.sh/resource-policy: keep
